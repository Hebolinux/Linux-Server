# OpenVPN

早期想要保证数据传输的安全性只能通过专线实现，但专线的成本太高无法做到普及，为了同时满足成本和安全性问题，就引出了VPN技术

## 虚拟专用网络简介

VPN（Virtual Private Network）虚拟专用网，依靠ISP在公共网络中建立专用的数据通信网络，为企业办公和数据传输提供安全的数据传输隧道服务。VPN中任意两点之间没有用到传统专线所需的端对端的物理链路，它利用公共网络资源和隧道技术虚拟出与专线同样的点到点功能，即剩去了专线的成本，又实现了比专线更高的灵活性

### VPN优势

- 安全性高

    在公网上提供安全可靠的隧道链接，保证数据传输的安全性。这对于金融或通讯网络的融合特别重要

- 成本低

    利用公共网络通信，使用更低的成本接入远程办公和数据传输

- 灵活

    支持在外VPN用户在任意时间、任意地点的移动接入，满足不断增长的移动业务需求

- 可扩展性

    VPN是逻辑链路网络，在物理网络中新增或修改节点，不影响VPN的部署

### VPN分类

1. 根据VPN建设单位不同进行划分

    - 租用运营商专线搭建VPN
        
        运营商的虚拟专线网络大多为MPLS VPN，企业购买运营商提供的VPN专线服务实现分支机构间的通信需求，VPN网关为运营商所有

    - 自建VPN
    
        企业基于公网环境自建的VPN网络常见的有IPsec VPN、GRE VPN、L2TP VPN、SSL VPN，自己购买VPN网络设备实现与分支机构间的通信和在VPN用户的通信

2. 根据VPN组网方式进行划分

    - 远程访问VPN
        
        适用于外派员工拨号接入VPN，只要在有Internet的地方就能够通过VPN远程接入企业内网资源。常见类型有SSL VPN、L2TP VPN

    - 站点之间VPN

        适用于企业两个局域网互通的场景。常见类型有MPLS VPN、IPsec VPN

3. 根据VPN所处网络层面划分

    - 应用层VPN：SSL VPN
    - 网络层VPN：IPsec VPN、GRE VPN
    - 链路层VPN：L2TP VPN、PPTP VPN

## 虚拟专用网络技术

VPN技术的基本原理就是隧道技术，隧道技术的本质是对传输的报文进行封装隧道协议头，利用公网建立专用的数据传输通道，报文传输到对端后再进行解封装，以此完成数据的安全可靠传输

### 网络通讯安全技术

1. 身份认证
    
    VPN网关对接入隧道的用户进行身份验证，通过身份验证后识别为合法用户

2. 数据加密
    
    通过加密技术将数据流加密后传输，即便数据被截获也无法识别。加密特性会使用到对称加密技术或非对称加密技术

3. 数据验证

    通过数据验证保证数据包传输前后的完整性和真伪，防止数据被篡改

不同VPN对网络通讯安全技术支持不同

|VPN类型|身份认证|数据加密和验证|备注|
|:-:|:-:|:-:|:-:|
|GRE|不支持|支持简单的关键字验证|可以结合IPsec使用<br />利用IPsec的数据加密和验证特性|
|L2TP|支持基于PPP的chap、pap、eap认证|不支持|可以结合IPsec使用<br />利用IPsec的数据加密和验证特性|
|IPsec|支持|支持|支持预共享秘钥验证或证书验证<br />支持IKEv2的EAP验证|
|SSL|支持|支持|支持用户名/密码或证书认证|
|MPLS|不支持|不支持|一般运行再专用的VPN骨干网络|